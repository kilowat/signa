"use strict";var Signa=(()=>{var rt=Object.defineProperty;var ae=Object.getOwnPropertyDescriptor;var pe=Object.getOwnPropertyNames;var ue=Object.prototype.hasOwnProperty;var bt=e=>{throw TypeError(e)};var le=(e,t)=>{for(var o in t)rt(e,o,{get:t[o],enumerable:!0})},fe=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of pe(t))!ue.call(e,n)&&n!==o&&rt(e,n,{get:()=>t[n],enumerable:!(r=ae(t,n))||r.enumerable});return e};var de=e=>fe(rt({},"__esModule",{value:!0}),e);var Tt=(e,t,o)=>t.has(e)||bt("Cannot "+o);var E=(e,t,o)=>(Tt(e,t,"read from private field"),o?o.call(e):t.get(e)),U=(e,t,o)=>t.has(e)?bt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,o),nt=(e,t,o,r)=>(Tt(e,t,"write to private field"),r?r.call(e,o):t.set(e,o),o);var We={};le(We,{State:()=>ot,compute:()=>j,createState:()=>K,defineComponent:()=>gt,html:()=>P,htmlFor:()=>ht});var Et=(e,t,o,r,n)=>{let i=o.length,c=t.length,s=i,a=0,l=0,u=null;for(;a<c||l<s;)if(c===a){let p=s<i?l?r(o[l-1],-0).nextSibling:r(o[s],0):n;for(;l<s;)e.insertBefore(r(o[l++],1),p)}else if(s===l)for(;a<c;)(!u||!u.has(t[a]))&&e.removeChild(r(t[a],-1)),a++;else if(t[a]===o[l])a++,l++;else if(t[c-1]===o[s-1])c--,s--;else if(t[a]===o[s-1]&&o[l]===t[c-1]){let p=r(t[--c],-0).nextSibling;e.insertBefore(r(o[l++],1),r(t[a++],-0).nextSibling),e.insertBefore(r(o[--s],1),p),t[c]=o[s]}else{if(!u){u=new Map;let p=l;for(;p<s;)u.set(o[p],p++)}if(u.has(t[a])){let p=u.get(t[a]);if(l<p&&p<s){let h=a,x=1;for(;++h<c&&h<s&&u.get(t[h])===p+x;)x++;if(x>p-l){let f=r(t[a],0);for(;l<p;)e.insertBefore(r(o[l++],1),f)}else e.replaceChild(r(o[l++],1),r(t[a++],-1))}else a++}else e.removeChild(r(t[a++],-1))}return o};var{isArray:H}=Array,{getPrototypeOf:he,getOwnPropertyDescriptor:me}=Object;var At="http://www.w3.org/2000/svg",v=[],B=()=>document.createRange(),T=(e,t,o)=>(e.set(t,o),o),Rt=(e,t)=>{let o;do o=me(e,t);while(!o&&(e=he(e)));return o},Gt=(e,t)=>t.reduceRight(xe,e),xe=(e,t)=>e.childNodes[t];var{setPrototypeOf:Se}=Object,wt=e=>{function t(o){return Se(o,new.target.prototype)}return t.prototype=e.prototype,t};var F,I=(e,t,o)=>(F||(F=B()),o?F.setStartAfter(e):F.setStartBefore(e),F.setEndAfter(t),F.deleteContents(),e);var st=({firstChild:e,lastChild:t},o)=>I(e,t,o),Nt=!1,X=(e,t)=>Nt&&e.nodeType===11?1/t<0?t?st(e,!0):e.lastChild:t?e.valueOf():e.firstChild:e,Ft=e=>document.createComment(e),N,$,A,z=class extends wt(DocumentFragment){constructor(o){super(o);U(this,N,Ft("<>"));U(this,$,Ft("</>"));U(this,A,v);this.replaceChildren(E(this,N),...o.childNodes,E(this,$)),Nt=!0}get firstChild(){return E(this,N)}get lastChild(){return E(this,$)}get parentNode(){return E(this,N).parentNode}remove(){st(this,!1)}replaceWith(o){st(this,!0).replaceWith(o)}valueOf(){let{parentNode:o}=this;if(o===this)E(this,A)===v&&nt(this,A,[...this.childNodes]);else{if(o){let{firstChild:r,lastChild:n}=this;for(nt(this,A,[r]);r!==n;)E(this,A).push(r=r.nextSibling)}this.replaceChildren(...E(this,A))}return this}};N=new WeakMap,$=new WeakMap,A=new WeakMap;var Ot=(e,t,o)=>e.setAttribute(t,o),D=(e,t)=>e.removeAttribute(t),Ce=(e,t)=>{for(let o in t){let r=t[o],n=o==="role"?o:`aria-${o}`;r==null?D(e,n):Ot(e,n,r)}return t},Z,ve=(e,t,o)=>{o=o.slice(1),Z||(Z=new WeakMap);let r=Z.get(e)||T(Z,e,{}),n=r[o];return n&&n[0]&&e.removeEventListener(o,...n),n=H(t)?t:[t,!1],r[o]=n,n[0]&&e.addEventListener(o,...n),t};var R=(e,t)=>{let{t:o,n:r}=e,n=!1;switch(typeof t){case"object":if(t!==null){(r||o).replaceWith(e.n=t.valueOf());break}case"undefined":n=!0;default:o.data=n?"":t,r&&(e.n=null,r.replaceWith(o));break}return t},ge=(e,t)=>ct(e,t,t==null?"class":"className"),be=(e,t)=>{let{dataset:o}=e;for(let r in t)t[r]==null?delete o[r]:o[r]=t[r];return t},q=(e,t,o)=>e[o]=t,Te=(e,t,o)=>q(e,t,o.slice(1)),ct=(e,t,o)=>t==null?(D(e,o),t):q(e,t,o),Pt=(e,t)=>(typeof t=="function"?t(e):t.current=e,t),it=(e,t,o)=>(t==null?D(e,o):Ot(e,o,t),t),Ee=(e,t)=>t==null?ct(e,t,"style"):q(e.style,t,"cssText"),Ae=(e,t,o)=>(e.toggleAttribute(o.slice(1),t),t),G=(e,t,o)=>{let{length:r}=t;if(e.data=`[${r}]`,r)return Et(e.parentNode,o,t,X,e);switch(o.length){case 1:o[0].remove();case 0:break;default:I(X(o[0],0),X(o.at(-1),-0),!1);break}return v},J=new Map([["aria",Ce],["class",ge],["data",be],["ref",Pt],["style",Ee]]),kt=(e,t,o)=>{var r;switch(t[0]){case".":return Te;case"?":return Ae;case"@":return ve;default:return o||"ownerSVGElement"in e?t==="ref"?Pt:it:J.get(t)||(t in e?t.startsWith("on")?q:(r=Rt(e,t))!=null&&r.set?ct:it:it)}},Mt=(e,t)=>(e.textContent=t==null?"":t,t);var O=(e,t,o)=>({a:e,b:t,c:o}),$t=(e,t)=>({b:e,c:t}),Dt=(e,t,o,r)=>({v,u:e,t,n:o,c:r}),g=()=>O(null,null,v);var at=e=>(t,o)=>{let{a:r,b:n,c:i}=e(t,o),c=document.importNode(r,!0),s=v;if(n!==v){s=[];for(let a,l,u=0;u<n.length;u++){let{a:p,b:h,c:x}=n[u],f=p===l?a:a=Gt(c,l=p);s[u]=Dt(h,f,x,h===G?[]:h===R?g():null)}}return $t(i?c.firstChild:new z(c),s)};var _t=/^(?:plaintext|script|style|textarea|title|xmp)$/i,Vt=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;var Re=/<([a-zA-Z0-9]+[a-zA-Z0-9:._-]*)([^>]*?)(\/?)>/g,Ge=/([^\s\\>"'=]+)\s*=\s*(['"]?)\x01/g,we=/[\x01\x02]/g,Lt=(e,t,o)=>{let r=0;return e.join("").trim().replace(Re,(n,i,c,s)=>`<${i}${c.replace(Ge,"=$2$1").trimEnd()}${s?o||Vt.test(i)?" /":`></${i}`:""}>`).replace(we,n=>n===""?`<!--${t+r++}-->`:t+r++)};var Y=document.createElement("template"),pt,ut,Wt=(e,t)=>{if(t)return pt||(pt=document.createElementNS(At,"svg"),ut=B(),ut.selectNodeContents(pt)),ut.createContextualFragment(e);Y.innerHTML=e;let{content:o}=Y;return Y=Y.cloneNode(!1),o};var lt=e=>{let t=[],o;for(;o=e.parentNode;)t.push(t.indexOf.call(o.childNodes,e)),e=o;return t},Kt=()=>document.createTextNode(""),Oe=(e,t,o)=>{let r=Wt(Lt(e,_,o),o),{length:n}=e,i=v;if(n>1){let a=[],l=document.createTreeWalker(r,129),u=0,p=`${_}${u++}`;for(i=[];u<n;){let h=l.nextNode();if(h.nodeType===8){if(h.data===p){let x=H(t[u-1])?G:R;x===R&&a.push(h),i.push(O(lt(h),x,null)),p=`${_}${u++}`}}else{let x;for(;h.hasAttribute(p);){x||(x=lt(h));let f=h.getAttribute(p);i.push(O(x,kt(h,f,o),f)),D(h,p),p=`${_}${u++}`}!o&&_t.test(h.localName)&&h.textContent.trim()===`<!--${p}-->`&&(i.push(O(x||lt(h),Mt,null)),p=`${_}${u++}`)}}for(u=0;u<a.length;u++)a[u].replaceWith(Kt())}let{childNodes:c}=r,{length:s}=c;return s<1?(s=1,r.appendChild(Kt())):s===1&&n!==1&&c[0].nodeType!==1&&(s=0),T(jt,e,O(r,i,s===1))},jt=new WeakMap,_="is\xB5",ft=e=>(t,o)=>jt.get(t)||Oe(t,o,e);var Pe=at(ft(!1)),ke=at(ft(!0)),dt=(e,{s:t,t:o,v:r})=>{if(e.a!==o){let{b:n,c:i}=(t?ke:Pe)(o,r);e.a=o,e.b=n,e.c=i}for(let{c:n}=e,i=0;i<n.length;i++){let c=r[i],s=n[i];switch(s.u){case G:s.v=G(s.t,Me(s.c,c),s.v);break;case R:let a=c instanceof b?dt(s.c||(s.c=g()),c):(s.c=null,c);a!==s.v&&(s.v=R(s,a));break;default:c!==s.v&&(s.v=s.u(s.t,c,s.n,s.v));break}}return e.b},Me=(e,t)=>{let o=0,{length:r}=t;for(r<e.length&&e.splice(r);o<r;o++){let n=t[o];n instanceof b?t[o]=dt(e[o]||(e[o]=g()),n):e[o]=null}return t},b=class{constructor(t,o,r){this.s=t,this.t=o,this.v=r}toDOM(t=g()){return dt(t,this)}};var Ut=e=>(t,...o)=>new b(e,t,o),P=Ut(!1),Ht=Ut(!0);var Bt=new WeakMap,Q=(e,t,o)=>{let r=Bt.get(e)||T(Bt,e,g()),{b:n}=r,i=o&&typeof t=="function"?t():t,c=i instanceof b?i.toDOM(r):i;return n!==c&&e.replaceChildren((r.b=c).valueOf()),e};var It=new WeakMap,zt=e=>(t,o)=>{function r(i,...c){return new b(e,i,c).toDOM(this)}let n=It.get(t)||T(It,t,new Map);return n.get(o)||T(n,o,r.bind(g()))},ht=zt(!1),$e=zt(!0);var Zt=new FinalizationRegistry(([e,t,o])=>{o&&console.debug(`%c${String(t)}`,"font-weight:bold","collected"),e(t)}),Xt=Object.create(null),qt=(e,t,{debug:o,handler:r,return:n,token:i=e}=Xt)=>{let c=n||new Proxy(e,r||Xt),s=[c,[t,e,!!o]];return i!==!1&&s.push(i),Zt.register(...s),c},Jt=e=>Zt.unregister(e);var mt=new WeakMap,De=e=>e(),tt=!0,xt=e=>(t,o)=>{if(tt=typeof o!="function",Yt(t),tt)return Q(t,o,!1);tt=!0;let r=new WeakRef(t),n=e(()=>{Q(r.deref(),o(),!1)});return mt.set(t,n),qt(n,De,{return:t})},Yt=e=>{let t=mt.get(e);t&&(tt&&mt.delete(e),Jt(t),t())};var _e=Symbol.for("preact-signals");function yt(){if(k>1)k--;else{for(var e,t=!1;V!==void 0;){var o=V;for(V=void 0,St++;o!==void 0;){var r=o.o;if(o.o=void 0,o.f&=-3,!(8&o.f)&&ee(o))try{o.c()}catch(n){t||(e=n,t=!0)}o=r}}if(St=0,k--,t)throw e}}var d=void 0;var V=void 0,k=0,St=0,et=0;function Qt(e){if(d!==void 0){var t=e.n;if(t===void 0||t.t!==d)return t={i:0,S:e,p:d.s,n:void 0,t:d,e:void 0,x:void 0,r:t},d.s!==void 0&&(d.s.n=t),d.s=t,e.n=t,32&d.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=d.s,t.n=void 0,d.s.n=t,d.s=t),t}}function m(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}m.prototype.brand=_e;m.prototype.h=function(){return!0};m.prototype.S=function(e){this.t!==e&&e.e===void 0&&(e.x=this.t,this.t!==void 0&&(this.t.e=e),this.t=e)};m.prototype.U=function(e){if(this.t!==void 0){var t=e.e,o=e.x;t!==void 0&&(t.x=o,e.e=void 0),o!==void 0&&(o.e=t,e.x=void 0),e===this.t&&(this.t=o)}};m.prototype.subscribe=function(e){var t=this;return W(function(){var o=t.value,r=d;d=void 0;try{e(o)}finally{d=r}})};m.prototype.valueOf=function(){return this.value};m.prototype.toString=function(){return this.value+""};m.prototype.toJSON=function(){return this.value};m.prototype.peek=function(){var e=d;d=void 0;try{return this.value}finally{d=e}};Object.defineProperty(m.prototype,"value",{get:function(){var e=Qt(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(St>100)throw new Error("Cycle detected");this.v=e,this.i++,et++,k++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{yt()}}}});function te(e){return new m(e)}function ee(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function oe(e){for(var t=e.s;t!==void 0;t=t.n){var o=t.S.n;if(o!==void 0&&(t.r=o),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function re(e){for(var t=e.s,o=void 0;t!==void 0;){var r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):o=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}e.s=o}function M(e){m.call(this,void 0),this.x=e,this.s=void 0,this.g=et-1,this.f=4}(M.prototype=new m).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===et))return!0;if(this.g=et,this.f|=1,this.i>0&&!ee(this))return this.f&=-2,!0;var e=d;try{oe(this),d=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(o){this.v=o,this.f|=16,this.i++}return d=e,re(this),this.f&=-2,!0};M.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}m.prototype.S.call(this,e)};M.prototype.U=function(e){if(this.t!==void 0&&(m.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};M.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};Object.defineProperty(M.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var e=Qt(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function ne(e){return new M(e)}function se(e){var t=e.u;if(e.u=void 0,typeof t=="function"){k++;var o=d;d=void 0;try{t()}catch(r){throw e.f&=-2,e.f|=8,Ct(e),r}finally{d=o,yt()}}}function Ct(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,se(e)}function Ve(e){if(d!==this)throw new Error("Out-of-order effect");re(this),d=e,this.f&=-2,8&this.f&&Ct(this),yt()}function L(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}L.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};L.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,se(this),oe(this),k++;var e=d;return d=this,Ve.bind(this,e)};L.prototype.N=function(){2&this.f||(this.f|=2,this.o=V,V=this)};L.prototype.d=function(){this.f|=8,1&this.f||Ct(this)};function W(e){var t=new L(e);try{t.c()}catch(o){throw t.d(),o}return t.d.bind(t)}var ot=class extends m{emit(t){if(typeof t=="object"&&t!==null&&typeof this.value=="object"){let o=vt(this.value);this.value={...o,...t}}else this.value=t}};function K(e){let t=te(e);return Object.setPrototypeOf(t,ot.prototype),t}function vt(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(vt);let t={};for(let o of Reflect.ownKeys(e))t[o]=vt(e[o]);return t}function j(e,t){return ne(()=>t(e.value))}function ie(e){let{state:t,getters:o,computed:r,actions:n}=e,i=K(t),c=o?Object.entries(o({state:i})).reduce((l,[u,p])=>({...l,[u]:p()}),{}):{},s=r?Object.entries(r({state:i})).reduce((l,[u,p])=>({...l,[u]:j(i,()=>p())}),{}):{},a=n?n({state:i,computed:s}):{};return{state:i,getters:c,computed:s,actions:a}}var w={};function ce(e,t){if(w[e])throw new Error(`Store \u0441 \u043A\u043B\u044E\u0447\u043E\u043C "${e}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.`);w[e]=t}function gt(e){let{tagName:t,state:o,getters:r,computed:n,actions:i,connected:c,disconnected:s,render:a,listen:l}=e,u=xt(W);class p extends HTMLElement{constructor(){super();this.slots={};this.cleanup=[];this.state=K(o),this.getters=this.setupGetters(),this.computed=this.setupComputed(),this.actions=this.setupActions()}get context(){return{state:this.state,getters:this.getters,computed:this.computed,actions:this.actions,element:this,slots:this.slots,store:w}}subscribeToState(f){let S=this.state.peek(),y=W(()=>{let C=this.state.value;f({newValue:C,oldValue:S}),S=C});return this.cleanup.push(y),()=>{let C=this.cleanup.indexOf(y);C>-1&&this.cleanup.splice(C,1),y()}}setupGetters(){if(!r)return{};let f=r({state:this.state,store:w});return Object.entries(f).reduce((S,[y,C])=>({...S,[y]:C()}),{})}setupComputed(){if(!n)return{};let f=n({state:this.state,store:w});return Object.entries(f).reduce((S,[y,C])=>({...S,[y]:j(this.state,()=>C())}),{})}setupActions(){if(!i)return{};let f={state:this.state,getters:this.getters,computed:this.computed,store:w};return i(f)}setupListener(){if(!l)return;let f=this.state.peek(),S=W(()=>{let y=this.state.value;l({...this.context,newValue:y,oldValue:f}),f=y});this.cleanup.push(S)}setupRender(){if(!a)return;let f=u(this,()=>a(this.context));this.cleanup.push(f)}collectSlots(){let f={default:[]};Array.from(this.childNodes).forEach(S=>{var y;if(S instanceof Element){let C=S.getAttribute("data-slot")||"default";f[C]=f[C]||[],f[C].push(S)}else(y=S.textContent)!=null&&y.trim()&&f.default.push(S)}),this.slots=f}connectedCallback(){this.collectSlots(),this.setupListener(),this.setupRender(),c==null||c(this.context)}disconnectedCallback(){this.cleanup.forEach(f=>f()),this.cleanup=[],s==null||s(this.context)}}customElements.get(t)||customElements.define(t,p)}var Le=ie({state:{count:0},getters:e=>({hi:()=>"hi"}),computed:({state:e})=>({isEven:()=>e.value.count%2===0}),actions:({state:e})=>({inc:()=>e.emit({count:e.value.count+1})})});ce("counter",Le);gt({tagName:"my-counter",state:{count:0},getters:e=>({hi:()=>"hi",counterStore:()=>e.store.counter}),computed:({state:e})=>({doubleCount:()=>e.value.count*2,isEven:()=>e.value.count%2===0}),actions:({state:e})=>({increment:t=>{e.emit({count:e.value.count+t})},reset:()=>{e.emit({count:0})}}),listen(e){console.log(e.getters.hi)},render:({state:e,computed:t,actions:o,getters:{counterStore:r}})=>P`
        <div>
             <button @click="${()=>r.actions.inc()}">Count store: ${r.state.value.count}</button> 
            <p >Count: ${e.value.count}</p>
            <p>Double: ${t.doubleCount.value}</p>
            <p>Is Even: ${t.isEven.value}</p>
            <button onclick=${()=>o.increment(1)}>+1</button>
            <button onclick=${o.reset}>Reset</button>
        </div>
    `});return de(We);})();
/*! Bundled license information:

uhtml/esm/index.js:
  (*! (c) Andrea Giammarchi - MIT *)

uhtml/esm/keyed.js:
  (*! (c) Andrea Giammarchi - MIT *)
*/
